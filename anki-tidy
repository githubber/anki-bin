#!/bin/sh

# we return factId because you can search for fid:5593423642400193445
# in Anki (which is useful when the value is too ambiguous)

echo '
    select fields.factId, fields.value from fields
    where

    -- fields with readings separated by \n not br - caused by AnkiMobile
    (fields.value like "%】%【%" and fields.value not like "%<br%")

    -- fields with leading or trailing whitespace
    or fields.value like " %" or fields.value like "% "
;' | sqlite3 $ANKI_DECK | perl -ple 's/^\s+|\s+$/\e[1;41m$&\e[m/g'
